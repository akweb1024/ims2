@tailwind base;
@tailwind components;
@tailwind utilities;

/* Focus Management Styles for Accessibility */
@layer base {
  /* Remove default outline and add custom focus ring */
  *:focus {
    @apply outline-none;
  }

  /* Visible focus ring for keyboard navigation */
  *:focus-visible {
    @apply ring-2 ring-blue-500 ring-offset-2 ring-offset-white;
  }

  /* Focus styles for interactive elements */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    @apply ring-2 ring-blue-500 ring-offset-2;
  }

  /* Focus styles for custom components */
  [role="button"]:focus-visible,
  [role="link"]:focus-visible,
  [role="tab"]:focus-visible,
  [role="menuitem"]:focus-visible {
    @apply ring-2 ring-blue-500 ring-offset-2;
  }

  /* High contrast focus for dark backgrounds */
  .dark *:focus-visible,
  [data-theme="dark"] *:focus-visible {
    @apply ring-blue-400 ring-offset-gray-900;
  }

  /* Skip navigation link styles */
  .skip-nav:focus {
    @apply translate-y-0 opacity-100;
  }
}

/* Ensure smooth transitions for focus states */
@layer utilities {
  .focus-transition {
    @apply transition-all duration-150 ease-in-out;
  }
}

@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap");

@layer base {
  :root {
    --bg-main: 248 250 252;
    /* #f8fafc */
    --text-main: 15 23 42;
    /* #0f172a */
    --text-muted: 71 85 105;
    /* #475569 */
    --primary: 37 99 235;
    /* #2563eb */
    --primary-hover: 29 78 216;
    /* #1d4ed8 */
    --surface: 255 255 255;
    /* #ffffff */
    --border: 226 232 240;
    /* #e2e8f0 */
    --card-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  }

  [data-theme="dark"] {
    --bg-main: 18 18 18;
    --text-main: 224 224 224;
    --text-muted: 160 160 160;
    --primary: 0 255 157;
    --primary-hover: 0 204 125;
    --surface: 30 30 30;
    --border: 51 51 51;
    --card-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
  }

  [data-theme="eco"] {
    --bg-main: 244 247 240;
    --text-main: 45 59 45;
    --text-muted: 92 112 92;
    --primary: 74 108 64;
    --primary-hover: 58 86 50;
    --surface: 232 237 228;
    --border: 204 214 200;
    --card-shadow: 0 10px 40px rgba(74, 108, 64, 0.1);
  }

  [data-theme="luxury"] {
    --bg-main: 15 23 42;
    --text-main: 248 250 252;
    --text-muted: 148 163 184;
    --primary: 212 175 55;
    --primary-hover: 241 196 15;
    --surface: 30 41 59;
    --border: 51 65 85;
    --card-shadow: 0 10px 40px rgba(212, 175, 55, 0.15);
  }

  [data-theme="industrial"] {
    --bg-main: 43 45 66;
    --text-main: 237 242 244;
    --text-muted: 141 153 174;
    --primary: 239 35 60;
    --primary-hover: 217 4 41;
    --surface: 61 64 91;
    --border: 74 78 105;
    --card-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  }

  [data-theme="minimal"] {
    --bg-main: 255 255 255;
    --text-main: 0 0 0;
    --text-muted: 102 102 102;
    --primary: 0 0 0;
    --primary-hover: 51 51 51;
    --surface: 255 255 255;
    --border: 238 238 238;
    --card-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
  }

  body {
    background-color: rgb(var(--bg-main));
    color: rgb(var(--text-main));
    font-family: "Inter", sans-serif;
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }
}

@layer components {
  /* Premium Card Styles */
  .card-premium {
    background-color: rgb(var(--surface));
    border-color: rgb(var(--border) / 0.5);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03);
    @apply rounded-2xl p-6 border transition-all duration-300 hover:shadow-[0_8px_30px_rgba(0,0,0,0.06)] hover:border-secondary-200;
  }

  /* Button Styles */
  .btn {
    @apply px-6 py-3 rounded-xl font-medium transition-all duration-200 inline-flex items-center justify-center gap-2;
  }

  .btn-primary {
    background-color: rgb(var(--primary));
    color: rgb(var(--surface));
    @apply hover:opacity-90 active:opacity-100 shadow-md hover:shadow-lg;
  }

  .btn-secondary {
    background-color: rgb(var(--border));
    color: rgb(var(--text-main));
    @apply hover:opacity-80 active:opacity-100;
  }

  .btn-success {
    @apply bg-success-500 text-white hover:bg-success-700 shadow-md hover:shadow-lg;
  }

  .btn-danger {
    @apply bg-danger-500 text-white hover:bg-danger-700 shadow-md hover:shadow-lg;
  }

  .btn-outline {
    border: 2px solid rgb(var(--primary));
    color: rgb(var(--primary));
    @apply hover:opacity-80 active:opacity-100;
  }

  /* Form Input Styles */
  .input {
    background-color: rgb(var(--surface));
    border-color: rgb(var(--text-muted) / 0.3);
    color: rgb(var(--text-main));
    @apply w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-primary-200 outline-none transition-all duration-200;
  }

  .label {
    color: rgb(var(--text-muted));
    @apply block text-sm font-medium mb-2;
  }

  /* Badge Styles */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold;
  }

  .badge-success {
    @apply bg-success-100 text-success-700;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-700;
  }

  .badge-danger {
    @apply bg-danger-100 text-danger-700;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-700;
  }

  /* Stats Card */
  .stat-card {
    @apply card-premium;
  }

  .stat-card-icon {
    @apply w-12 h-12 rounded-xl flex items-center justify-center text-2xl;
  }

  /* Navigation Styles */
  .nav-link {
    @apply px-4 py-2 rounded-lg text-secondary-700 hover:bg-primary-50 hover:text-primary-700 transition-colors duration-200 font-medium;
  }

  .nav-link-active {
    @apply bg-primary-100 text-primary-700;
  }

  /* Table Styles */
  .table {
    @apply w-full border-collapse;
  }

  .table-header {
    background-color: rgb(var(--border) / 0.3);
    color: rgb(var(--text-muted));
    @apply font-semibold text-sm uppercase tracking-wider;
  }

  .table-row {
    border-bottom: 1px solid rgb(var(--border) / 0.5);
    @apply hover:opacity-90 transition-colors duration-150;
  }

  .table-cell {
    @apply px-6 py-4 text-sm;
  }

  /* Premium Inputs */
  .input-premium {
    @apply w-full px-4 py-3 rounded-xl border border-secondary-200 bg-secondary-50/50 text-secondary-900 text-sm font-medium focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all duration-200 outline-none hover:bg-white;
  }

  .label-premium {
    @apply block text-xs font-bold text-secondary-500 uppercase tracking-wide mb-2;
  }

  /* Tooltip Utility */
  .tooltip {
    @apply relative inline-block cursor-help;
  }

  .tooltip .tooltip-text {
    @apply invisible w-48 bg-secondary-900 text-white text-center rounded-lg py-2 absolute z-50 bottom-full left-1/2 -translate-x-1/2 mb-2 opacity-0 transition-opacity duration-300 text-xs font-normal shadow-xl px-2;
  }

  .tooltip:hover .tooltip-text {
    @apply visible opacity-100;
  }

  .tooltip .tooltip-text::after {
    content: "";
    @apply absolute top-full left-1/2 -ml-1 border-4;
    border-color: #0f172a transparent transparent transparent;
  }
}

@layer utilities {
  .gradient-primary {
    @apply bg-gradient-to-r from-primary-600 to-primary-700;
  }

  .gradient-secondary {
    @apply bg-gradient-to-r from-secondary-700 to-secondary-900;
  }

  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-800;
  }

  .glass-effect {
    @apply bg-white/80 backdrop-blur-md;
  }

  /* Text Wrapping Utilities */
  .break-words {
    word-break: break-word;
    overflow-wrap: break-word;
  }

  .overflow-wrap-anywhere {
    overflow-wrap: anywhere;
  }

  /* Prose Enhancements for SafeHTML content */
  .prose {
    max-width: 100%;
  }

  .prose p {
    margin-bottom: 0.75rem;
    line-height: 1.6;
  }

  .prose ul,
  .prose ol {
    margin-left: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .prose li {
    margin-bottom: 0.25rem;
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  .prose strong {
    font-weight: 600;
  }

  .prose a {
    color: rgb(var(--primary));
    text-decoration: underline;
  }

  .prose code {
    background-color: rgb(var(--border) / 0.3);
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-size: 0.875em;
  }

  .prose pre {
    background-color: rgb(var(--border) / 0.3);
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin-bottom: 1rem;
  }

  .prose blockquote {
    border-left: 4px solid rgb(var(--primary));
    padding-left: 1rem;
    margin-left: 0;
    font-style: italic;
    color: rgb(var(--text-muted));
  }

  .prose table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1rem;
  }

  .prose th,
  .prose td {
    border: 1px solid rgb(var(--border));
    padding: 0.5rem;
    text-align: left;
  }

  .prose th {
    background-color: rgb(var(--border) / 0.3);
    font-weight: 600;
  }

  /* Ensure all text content wraps properly */
  .prose * {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
}

@media print {
  /* Hide sidebar, header, and non-printable elements */
  aside,
  nav,
  header,
  footer,
  button,
  .no-print {
    display: none !important;
  }

  /* Reset layout constraints for full-page print */
  body,
  main {
    padding: 0 !important;
    margin: 0 !important;
    background: white !important;
    color: black !important;
    height: auto !important;
    overflow: visible !important;
  }

  /* Ensure card looks like a document */
  .card-premium {
    box-shadow: none !important;
    border: none !important;
    padding: 0 !important;
  }

  /* Make sure the main content is visible */
  .print-content {
    display: block !important;
    width: 100% !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
  }
}
